# 3DN Scraper Template - Configuration Guide

**Version:** 1.0  
**Last Updated:** 2025-01-11  
**Template Version:** 1.0.0

---

## Table of Contents

1. [Introduction](#introduction)
2. [Configuration Architecture](#configuration-architecture)
3. [Base Configuration Reference](#base-configuration-reference)
4. [Client Configuration Reference](#client-configuration-reference)
5. [Extraction Strategy Configuration](#extraction-strategy-configuration)
6. [Environment Variables](#environment-variables)
7. [Configuration Examples](#configuration-examples)
8. [Best Practices](#best-practices)
9. [Troubleshooting Configuration](#troubleshooting-configuration)

---

## Introduction

The 3DN Scraper Template uses a layered configuration system that separates:

- **Base configuration** - 3DN Template defaults that apply to all clients
- **Client configuration** - Client-specific settings that override defaults
- **Extraction strategies** - CSS selectors and data extraction logic
- **Environment variables** - Secrets and deployment-specific settings

This guide provides complete reference documentation for all configuration options.

### Configuration Philosophy

The configuration system follows these principles:

1. **Convention over Configuration** - Sensible defaults work out of the box
2. **Override Only What's Needed** - Client configs only specify what differs
3. **Type Safety** - Configuration validated at load time
4. **Clear Separation** - Core template vs client-specific concerns
5. **Environment Aware** - Different settings for dev/test/production

---

## Configuration Architecture

### Configuration Layers

```
┌─────────────────────────────────────────┐
│     Environment Variables (.env)        │  ← Secrets, deployment settings
└─────────────────────────────────────────┘
                    ↓
┌─────────────────────────────────────────┐
│   Client Configuration                  │  ← Client-specific overrides
│   config/clients/{name}/client_config.py│
└─────────────────────────────────────────┘
                    ↓
┌─────────────────────────────────────────┐
│   Base Configuration                    │  ← 3DN Template defaults
│   config/base_config.py                 │
└─────────────────────────────────────────┘
                    ↓
┌─────────────────────────────────────────┐
│   Extraction Strategy                   │  ← CSS selectors
│   config/clients/{name}/extraction_     │
│   strategies.py                         │
└─────────────────────────────────────────┘
```

### Configuration Loading

1. **Base config loaded** - `BaseConfig` class provides defaults
2. **Client config loaded** - `ClientConfig` inherits and overrides
3. **Environment vars applied** - Override any config values
4. **Validation performed** - Ensure all required fields present
5. **Extraction strategy loaded** - CSS selectors loaded separately

### File Locations

```
config/
├── base_config.py                    # BaseConfig class (DO NOT EDIT)
├── config_loader.py                  # Dynamic config loading
├── client_config.template.py         # Template for new clients
└── clients/
    └── {client_name}/
        ├── client_config.py          # ClientConfig class (EDIT THIS)
        └── extraction_strategies.py  # CSS selectors (EDIT THIS)
```

---

## Base Configuration Reference

**File:** `config/base_config.py`

**Purpose:** Defines 3DN Template defaults that work across all client deployments.

**DO NOT EDIT THIS FILE** - Override settings in client-specific config instead.

### Template Identification

```python
class BaseConfig:
    TEMPLATE_VERSION = "1.0.0"
    TEMPLATE_NAME = "3DN Scraper Template"
```

| Setting | Type | Default | Description |
|---------|------|---------|-------------|
| TEMPLATE_VERSION | str | "1.0.0" | 3DN Template version number |
| TEMPLATE_NAME | str | "3DN Scraper Template" | Template product name |

### Timeout Configuration

```python
# Page loading timeouts (milliseconds)
PAGE_TIMEOUT = 60000          # 60 seconds
DETAIL_PAGE_TIMEOUT = 35000   # 35 seconds
PDF_TIMEOUT = 30              # 30 seconds (for PDF downloads)
```

| Setting | Type | Default | Description | When to Override |
|---------|------|---------|-------------|------------------|
| PAGE_TIMEOUT | int | 60000 | Category page load timeout (ms) | Site loads slowly |
| DETAIL_PAGE_TIMEOUT | int | 35000 | Product page load timeout (ms) | Detail pages slow |
| PDF_TIMEOUT | int | 30 | PDF download timeout (seconds) | Large PDFs or slow server |

**Override Example:**
```python
class ClientConfig(BaseConfig):
    # Override for slow-loading site
    PAGE_TIMEOUT = 90000  # 90 seconds
```

### Rate Limiting

```python
RATE_LIMIT_DELAY = 2          # Seconds between requests
```

| Setting | Type | Default | Description | When to Override |
|---------|------|---------|-------------|------------------|
| RATE_LIMIT_DELAY | int | 2 | Delay between page requests (seconds) | Getting rate limited/blocked |

**Override Example:**
```python
class ClientConfig(BaseConfig):
    # Reduce load on target server
    RATE_LIMIT_DELAY = 5  # 5 seconds between requests
```

### Retry Configuration

```python
MAX_RETRIES = 3               # Maximum retry attempts
RETRY_DELAY = 5               # Seconds to wait before retry
```

| Setting | Type | Default | Description | When to Override |
|---------|------|---------|-------------|------------------|
| MAX_RETRIES | int | 3 | Number of retry attempts for failed requests | Unreliable connection |
| RETRY_DELAY | int | 5 | Wait time before retry (seconds) | Need more recovery time |

**Override Example:**
```python
class ClientConfig(BaseConfig):
    # For unreliable connection
    MAX_RETRIES = 5
    RETRY_DELAY = 10
```

### Test Mode Configuration

```python
TEST_CATEGORY_LIMIT = 2       # Categories to process in test mode
TEST_PRODUCT_LIMIT = 5        # Products per category in test mode
```

| Setting | Type | Default | Description | When to Override |
|---------|------|---------|-------------|------------------|
| TEST_CATEGORY_LIMIT | int | 2 | Number of categories to scrape in test mode | Faster/slower testing |
| TEST_PRODUCT_LIMIT | int | 5 | Products per category in test mode | More/less test data |

**Override Example:**
```python
class ClientConfig(BaseConfig):
    # Faster testing
    TEST_CATEGORY_LIMIT = 1
    TEST_PRODUCT_LIMIT = 3
```

### Browser Configuration

```python
USER_AGENT = "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36"
SCREENSHOT_WIDTH = 1920
SCREENSHOT_HEIGHT = 1080
```

| Setting | Type | Default | Description | When to Override |
|---------|------|---------|-------------|------------------|
| USER_AGENT | str | Mozilla/5.0... | Browser user agent string | Site requires specific UA |
| SCREENSHOT_WIDTH | int | 1920 | Screenshot width (pixels) | Different resolution needed |
| SCREENSHOT_HEIGHT | int | 1080 | Screenshot height (pixels) | Different resolution needed |

### Directory Structure

```python
SUBDIRS = [
    "categories",    # Category page data
    "products",      # Product detail data
    "screenshots",   # Page screenshots
    "logs",         # Scraping logs
    "reports",      # Summary reports
    "pdfs",         # Downloaded PDFs (lowercase)
    "PDFs"          # Alternative PDF directory (uppercase)
]
```

| Setting | Type | Default | Description | When to Override |
|---------|------|---------|-------------|------------------|
| SUBDIRS | list | See above | Output subdirectories to create | Need different structure |

### PDF Download Settings

```python
PDF_MAX_RETRIES = 3           # PDF download retry attempts
```

| Setting | Type | Default | Description | When to Override |
|---------|------|---------|-------------|------------------|
| PDF_MAX_RETRIES | int | 3 | Retry attempts for PDF downloads | PDFs frequently fail |

---

## Client Configuration Reference

**File:** `config/clients/{client_name}/client_config.py`

**Purpose:** Client-specific settings that override BaseConfig defaults.

**EDIT THIS FILE** for each client deployment.

### Required Fields

These fields MUST be specified for every client:

```python
class ClientConfig(BaseConfig):
    # Client identification (REQUIRED)
    CLIENT_NAME = "clientname"              # Short identifier
    CLIENT_FULL_NAME = "Client Company"     # Full display name
    
    # Website configuration (REQUIRED)
    BASE_URL = "https://client.com"         # Client website URL
    
    # URL patterns (REQUIRED)
    CATEGORY_URL_PATTERN = "/category/{slug}/"
    PRODUCT_URL_PATTERN = "/product/{slug}/"
    
    # Output configuration (REQUIRED)
    OUTPUT_PREFIX = "ClientScrape"          # Directory prefix
    BASE_OUTPUT_DIR = "client_scrapes"      # Base output directory
```

### Client Identification

```python
CLIENT_NAME = "clientname"
CLIENT_FULL_NAME = "Client Company Name"
```

| Field | Type | Required | Description | Example |
|-------|------|----------|-------------|---------|
| CLIENT_NAME | str | Yes | Short identifier (lowercase, no spaces) | `"agar"`, `"acme-chem"` |
| CLIENT_FULL_NAME | str | Yes | Full display name for reports | `"Agar Cleaning Systems"` |

**Naming Rules for CLIENT_NAME:**
- Lowercase only
- No spaces (use hyphens)
- Alphanumeric and hyphens only
- Should match directory name in `config/clients/`

### Website Configuration

```python
BASE_URL = "https://client-website.com"
```

| Field | Type | Required | Description | Example |
|-------|------|----------|-------------|---------|
| BASE_URL | str | Yes | Client website base URL | `"https://agar.com.au"` |

**Requirements:**
- Must start with `http://` or `https://`
- No trailing slash
- Must be accessible without authentication

### URL Pattern Configuration

```python
CATEGORY_URL_PATTERN = "/product-category/{slug}/"
PRODUCT_URL_PATTERN = "/product/{slug}/"
```

| Field | Type | Required | Description | Example |
|-------|------|----------|-------------|---------|
| CATEGORY_URL_PATTERN | str | Yes | Template for category URLs | `"/category/{slug}/"` |
| PRODUCT_URL_PATTERN | str | Yes | Template for product URLs | `"/products/{slug}"` |

**Pattern Rules:**
- Must contain `{slug}` placeholder
- `{slug}` will be replaced with category/product identifier
- Should start with `/`
- Include trailing `/` if website requires it

**Common Patterns:**

| Platform | Category Pattern | Product Pattern |
|----------|------------------|-----------------|
| WooCommerce | `/product-category/{slug}/` | `/product/{slug}/` |
| Shopify | `/collections/{slug}` | `/products/{slug}` |
| Magento | `/catalog/{slug}` | `/product/{slug}` |
| Custom | `/categories/{slug}/` | `/item/{slug}/` |

### Output Configuration

```python
OUTPUT_PREFIX = "ClientScrape"
BASE_OUTPUT_DIR = "client_scrapes"
```

| Field | Type | Required | Description | Example |
|-------|------|----------|-------------|---------|
| OUTPUT_PREFIX | str | Yes | Prefix for run directories | `"AgarScrape"` |
| BASE_OUTPUT_DIR | str | Yes | Base directory for all output | `"agar_scrapes"` |

**Output Structure:**
```
{BASE_OUTPUT_DIR}/
└── {OUTPUT_PREFIX}_{timestamp}/
    ├── categories/
    ├── products/
    ├── pdfs/
    ├── screenshots/
    ├── logs/
    └── reports/
```

### Category Configuration

```python
KNOWN_CATEGORIES = [
    "category-slug-1",
    "category-slug-2",
    "category-slug-3"
]
```

| Field | Type | Required | Description | Default |
|-------|------|----------|-------------|---------|
| KNOWN_CATEGORIES | list[str] | Recommended | List of category slugs to scrape | `[]` |

**Category Slug Requirements:**
- Must match URL slug exactly
- Lowercase recommended
- No spaces (hyphens for separation)
- Will be inserted into CATEGORY_URL_PATTERN

**Example:**
```python
# If category URL is: https://site.com/category/cleaning-supplies/
# Then slug is: "cleaning-supplies"
KNOWN_CATEGORIES = ["cleaning-supplies"]
```

### PDF/Document Configuration

```python
HAS_SDS_DOCUMENTS = True              # Has Safety Data Sheets
HAS_PDS_DOCUMENTS = True              # Has Product Data Sheets
SDS_FIELD_NAME = "sds_url"            # Field name in output
PDS_FIELD_NAME = "pds_url"            # Field name in output
```

| Field | Type | Required | Description | Default |
|-------|------|----------|-------------|---------|
| HAS_SDS_DOCUMENTS | bool | No | Whether products have SDS documents | False |
| HAS_PDS_DOCUMENTS | bool | No | Whether products have PDS documents | False |
| SDS_FIELD_NAME | str | No | Output field name for SDS URLs | "sds_url" |
| PDS_FIELD_NAME | str | No | Output field name for PDS URLs | "pds_url" |

**When to Enable:**
- Set to `True` if products have downloadable documents
- Define extraction selectors in `extraction_strategies.py`
- Documents will be automatically downloaded to `pdfs/` directory

### Product Schema Mapping

```python
PRODUCT_SCHEMA = {
    "name_field": "product_name",
    "url_field": "product_url",
    "image_field": "product_image_url",
    "overview_field": "product_overview",
    "description_field": "product_description",
    "sku_field": "product_sku",
    "categories_field": "product_categories"
}
```

| Field | Type | Required | Description | Default Field Name |
|-------|------|----------|-------------|--------------------|
| name_field | str | Yes | Product name/title | "product_name" |
| url_field | str | Yes | Product URL | "product_url" |
| image_field | str | No | Main product image URL | "product_image_url" |
| overview_field | str | No | Short description | "product_overview" |
| description_field | str | No | Full description | "product_description" |
| sku_field | str | No | Product SKU/code | "product_sku" |
| categories_field | str | No | Product categories | "product_categories" |

**Schema Mapping Purpose:**
- Maps internal field names to output JSON keys
- Allows customization of output field names
- Maintains consistency across client deployments

**Example Custom Schema:**
```python
PRODUCT_SCHEMA = {
    "name_field": "title",              # Output as "title"
    "url_field": "link",                # Output as "link"
    "image_field": "main_image",        # Output as "main_image"
    "description_field": "full_desc",   # Output as "full_desc"
    "sku_field": "product_code"         # Output as "product_code"
}
```

### Optional Overrides

Any BaseConfig setting can be overridden in client config:

```python
class ClientConfig(BaseConfig):
    # Override timeouts
    PAGE_TIMEOUT = 90000
    DETAIL_PAGE_TIMEOUT = 60000
    
    # Override rate limiting
    RATE_LIMIT_DELAY = 5
    
    # Override retry logic
    MAX_RETRIES = 5
    RETRY_DELAY = 10
    
    # Override test mode
    TEST_CATEGORY_LIMIT = 1
    TEST_PRODUCT_LIMIT = 3
```

---

## Extraction Strategy Configuration

**File:** `config/clients/{client_name}/extraction_strategies.py`

**Purpose:** Define CSS selectors and data extraction logic for the client's website.

### Structure

```python
from typing import Dict, List
from strategies.base_strategy import ExtractionStrategy

class ClientExtractionStrategy(ExtractionStrategy):
    """Client-specific CSS selectors and extraction logic"""
    
    CATEGORY_SELECTORS = { }
    PRODUCT_SELECTORS = { }
    PDF_SELECTORS = { }
```

### Category Selectors

Selectors for extracting product lists from category pages:

```python
CATEGORY_SELECTORS = {
    "products": "ul.products li.product",        # Container for each product
    "product_link": "a.woocommerce-LoopProduct-link",  # Product URL
    "product_name": "h2.woocommerce-loop-product__title"  # Product name
}
```

| Key | Required | Description | Example |
|-----|----------|-------------|---------|
| products | Yes | Selector for individual product containers | `"li.product"` |
| product_link | Yes | Selector for product URL (within container) | `"a.product-link"` |
| product_name | No | Selector for product name (within container) | `"h2.title"` |

**Selection Strategy:**
- `products` should return multiple elements (one per product)
- `product_link` and `product_name` are relative to each product container
- Selectors should be specific enough to avoid false matches

### Product Selectors

Selectors for extracting data from product detail pages:

```python
PRODUCT_SELECTORS = {
    "name": "h1.product_title",
    "image": "div.woocommerce-product-gallery img",
    "overview": "div.product-overview",
    "description": "div.woocommerce-Tabs-panel--description",
    "sku": "span.sku",
    "categories": "span.posted_in a"
}
```

| Key | Required | Maps To | Description | Example |
|-----|----------|---------|-------------|---------|
| name | Yes | name_field | Product name/title | `"h1.title"` |
| image | No | image_field | Main product image | `"img.main"` |
| overview | No | overview_field | Short description | `".summary"` |
| description | No | description_field | Full description | `".description"` |
| sku | No | sku_field | Product SKU/code | `".sku"` |
| categories | No | categories_field | Product categories | `".category a"` |

**Selection Best Practices:**
- Use unique classes or IDs when available
- Avoid overly generic selectors (`div`, `span` alone)
- Test selectors in browser console first
- Handle missing elements gracefully (optional fields)

### PDF Selectors

Selectors for finding downloadable documents:

```python
PDF_SELECTORS = {
    "sds_link": "a[href*='SDS']",           # Links containing 'SDS'
    "pds_link": "a[href*='PDS']",           # Links containing 'PDS'
    "document_section": "div.product-documents"  # Container for docs
}
```

| Key | Required | Used When | Description | Example |
|-----|----------|-----------|-------------|---------|
| sds_link | If HAS_SDS_DOCUMENTS | True | Selector for SDS document link | `"a[href*='safety']"` |
| pds_link | If HAS_PDS_DOCUMENTS | True | Selector for PDS document link | `"a[href*='datasheet']"` |
| document_section | No | Optional | Container with all documents | `".documents"` |

**Common Selector Patterns:**

| Pattern | Description | Example |
|---------|-------------|---------|
| `[href*='text']` | Link containing text | `a[href*='SDS']` |
| `[data-attr='value']` | Data attribute match | `a[data-type='pdf']` |
| `.class a` | Descendant selector | `.downloads a` |
| `a:contains('text')` | Not supported - use `[href*='']` |

### Advanced Extraction

For complex extraction needs, override methods:

```python
from typing import Dict, List
from strategies.base_strategy import ExtractionStrategy
from bs4 import BeautifulSoup

class ClientExtractionStrategy(ExtractionStrategy):
    """Client-specific extraction logic"""
    
    def extract_product_data(self, html: str) -> Dict:
        """
        Custom extraction logic for complex cases
        
        Args:
            html: Raw HTML content of product page
            
        Returns:
            Dictionary with extracted data
        """
        soup = BeautifulSoup(html, 'html.parser')
        
        # Custom extraction logic here
        product_data = {
            "name": self._extract_name(soup),
            "description": self._extract_description(soup),
            # ... other fields
        }
        
        return product_data
    
    def _extract_name(self, soup: BeautifulSoup) -> str:
        """Helper method for complex name extraction"""
        # Complex extraction logic
        pass
```

---

## Environment Variables

**File:** `.env` (create from `.env.template`)

**Purpose:** Store secrets and deployment-specific settings.

### Environment Variable Reference

```bash
# Client Configuration Override
CLIENT_NAME=agar                          # Active client (optional)

# Crawl4AI Configuration
CRAWL4AI_VERBOSE=false                   # Enable verbose logging
CRAWL4AI_MAX_CONCURRENT=5                # Max concurrent requests

# Output Configuration
BASE_OUTPUT_DIR=./scrapes                # Override output directory

# Logging Configuration
LOG_LEVEL=INFO                           # DEBUG, INFO, WARNING, ERROR

# Proxy Configuration (if needed)
HTTP_PROXY=http://proxy.example.com:8080
HTTPS_PROXY=https://proxy.example.com:8080

# Rate Limiting Override
RATE_LIMIT_DELAY=2                       # Override delay (seconds)

# API Keys (future use)
OPENAI_API_KEY=your-key-here
ANTHROPIC_API_KEY=your-key-here

# Database Configuration (future use)
DATABASE_URL=postgresql://user:pass@localhost/dbname

# Notification Configuration (future use)
SLACK_WEBHOOK_URL=https://hooks.slack.com/...
EMAIL_SMTP_SERVER=smtp.gmail.com
```

### Priority Order

1. **Environment variables** (highest priority)
2. **Client configuration**
3. **Base configuration** (lowest priority)

**Example:**
```bash
# .env file
RATE_LIMIT_DELAY=5

# This overrides both:
# - BaseConfig.RATE_LIMIT_DELAY = 2
# - ClientConfig.RATE_LIMIT_DELAY = 3
```

### Loading Environment Variables

The configuration loader automatically reads `.env` file:

```python
from dotenv import load_dotenv
import os

# Load environment variables
load_dotenv()

# Access in config
RATE_LIMIT_DELAY = int(os.getenv('RATE_LIMIT_DELAY', '2'))
```

---

## Configuration Examples

### Example 1: Simple E-Commerce Site

```python
# config/clients/simpleshop/client_config.py
from config.base_config import BaseConfig

class ClientConfig(BaseConfig):
    """Simple Shop configuration"""
    
    # Required fields
    CLIENT_NAME = "simpleshop"
    CLIENT_FULL_NAME = "Simple Shop"
    BASE_URL = "https://simpleshop.com"
    
    CATEGORY_URL_PATTERN = "/category/{slug}"
    PRODUCT_URL_PATTERN = "/product/{slug}"
    
    OUTPUT_PREFIX = "SimpleShopScrape"
    BASE_OUTPUT_DIR = "simpleshop_scrapes"
    
    # Categories
    KNOWN_CATEGORIES = [
        "electronics",
        "clothing",
        "home-goods"
    ]
    
    # No PDFs
    HAS_SDS_DOCUMENTS = False
    HAS_PDS_DOCUMENTS = False
    
    # Standard schema
    PRODUCT_SCHEMA = {
        "name_field": "product_name",
        "url_field": "product_url",
        "image_field": "product_image",
        "description_field": "description",
        "sku_field": "sku"
    }
```

### Example 2: Chemical Products with Documents

```python
# config/clients/chemco/client_config.py
from config.base_config import BaseConfig

class ClientConfig(BaseConfig):
    """Chemical Company configuration"""
    
    # Required fields
    CLIENT_NAME = "chemco"
    CLIENT_FULL_NAME = "Chemical Company Ltd"
    BASE_URL = "https://chemco.com"
    
    CATEGORY_URL_PATTERN = "/products/{slug}/"
    PRODUCT_URL_PATTERN = "/product-detail/{slug}/"
    
    OUTPUT_PREFIX = "ChemCoScrape"
    BASE_OUTPUT_DIR = "chemco_scrapes"
    
    # Categories
    KNOWN_CATEGORIES = [
        "industrial-cleaners",
        "solvents",
        "disinfectants"
    ]
    
    # Document handling
    HAS_SDS_DOCUMENTS = True
    HAS_PDS_DOCUMENTS = True
    SDS_FIELD_NAME = "safety_datasheet"
    PDS_FIELD_NAME = "product_datasheet"
    
    # Custom schema
    PRODUCT_SCHEMA = {
        "name_field": "product_name",
        "url_field": "product_url",
        "image_field": "image_url",
        "description_field": "full_description",
        "sku_field": "product_code",
        "categories_field": "categories"
    }
    
    # Performance tuning
    PAGE_TIMEOUT = 90000          # Slower site
    RATE_LIMIT_DELAY = 5          # Respect rate limits
    MAX_RETRIES = 5               # Unreliable connection
```

### Example 3: High-Volume Site

```python
# config/clients/megashop/client_config.py
from config.base_config import BaseConfig

class ClientConfig(BaseConfig):
    """Large e-commerce site configuration"""
    
    # Required fields
    CLIENT_NAME = "megashop"
    CLIENT_FULL_NAME = "Mega Shop Online"
    BASE_URL = "https://megashop.com"
    
    CATEGORY_URL_PATTERN = "/c/{slug}"
    PRODUCT_URL_PATTERN = "/p/{slug}"
    
    OUTPUT_PREFIX = "MegaShopScrape"
    BASE_OUTPUT_DIR = "megashop_scrapes"
    
    # Many categories
    KNOWN_CATEGORIES = [
        "electronics", "computers", "phones", "tablets",
        "clothing", "shoes", "accessories",
        "home", "kitchen", "garden",
        # ... many more
    ]
    
    # No documents
    HAS_SDS_DOCUMENTS = False
    HAS_PDS_DOCUMENTS = False
    
    # Standard schema
    PRODUCT_SCHEMA = {
        "name_field": "title",
        "url_field": "url",
        "image_field": "image",
        "description_field": "desc",
        "sku_field": "sku",
        "categories_field": "cats"
    }
    
    # Performance optimization
    RATE_LIMIT_DELAY = 1          # Fast, reliable site
    TEST_CATEGORY_LIMIT = 1       # Faster testing
    TEST_PRODUCT_LIMIT = 3
```

---

## Best Practices

### Configuration Management

1. **Version Control**
   ```bash
   # Commit working configurations
   git add config/clients/clientname/
   git commit -m "Add clientname configuration"
   ```

2. **Document Decisions**
   ```python
   # Add comments for non-obvious settings
   RATE_LIMIT_DELAY = 10  # Site aggressively blocks scrapers
   ```

3. **Use Descriptive Names**
   ```python
   # Good
   CLIENT_NAME = "acme-chemicals"
   CATEGORY_URL_PATTERN = "/category/{slug}/"
   
   # Bad
   CLIENT_NAME = "client1"
   CATEGORY_URL_PATTERN = "/{slug}/"  # Unclear what this is
   ```

4. **Test After Changes**
   ```bash
   # Always validate after editing
   python scripts/validate_config.py --client clientname
   ```

### Selector Best Practices

1. **Be Specific but Not Brittle**
   ```python
   # Good - specific but flexible
   "products": "ul.products li.product"
   
   # Bad - too generic
   "products": "li"
   
   # Bad - too specific (will break if structure changes)
   "products": "div.container > div.wrapper > ul.products > li.product"
   ```

2. **Use Classes over Complex Hierarchies**
   ```python
   # Good
   "name": "h1.product-title"
   
   # Less good
   "name": "div.product div.header h1"
   ```

3. **Test in Browser Console**
   ```javascript
   // Test selector returns expected elements
   document.querySelectorAll("ul.products li.product")
   ```

4. **Handle Missing Elements**
   ```python
   # Mark optional fields
   PRODUCT_SELECTORS = {
       "name": "h1.title",          # Required
       "image": "img.main",          # Required
       "price": "span.price"        # Optional - may not exist
   }
   ```

### Performance Tuning

1. **Start Conservative**
   ```python
   # Begin with longer delays
   RATE_LIMIT_DELAY = 5
   PAGE_TIMEOUT = 90000
   ```

2. **Optimize Incrementally**
   ```python
   # After testing, reduce if possible
   RATE_LIMIT_DELAY = 2  # Tested, no rate limiting
   PAGE_TIMEOUT = 60000   # Pages load fast
   ```

3. **Monitor and Adjust**
   ```python
   # If getting blocked:
   RATE_LIMIT_DELAY = 10  # Increase delay
   
   # If timing out:
   PAGE_TIMEOUT = 120000  # Increase timeout
   ```

### Environment-Specific Settings

1. **Development**
   ```bash
   # .env.development
   LOG_LEVEL=DEBUG
   TEST_CATEGORY_LIMIT=1
   TEST_PRODUCT_LIMIT=2
   ```

2. **Production**
   ```bash
   # .env.production
   LOG_LEVEL=INFO
   RATE_LIMIT_DELAY=5
   ```

---

## Troubleshooting Configuration

### Common Configuration Issues

#### Issue: Configuration Not Loading

**Symptom:** `ConfigError: Client configuration not found`

**Solutions:**
1. Verify client directory exists: `config/clients/{clientname}/`
2. Check client_config.py exists in directory
3. Verify CLIENT_NAME matches directory name
4. Run validation: `python scripts/validate_config.py --client clientname`

#### Issue: Required Field Missing

**Symptom:** `ConfigError: Required field 'BASE_URL' not found`

**Solutions:**
1. Check all required fields are defined in client_config.py
2. Ensure fields inherit from BaseConfig
3. Run validation to see all missing fields

#### Issue: URL Pattern Invalid

**Symptom:** `ConfigError: URL pattern must contain {slug}`

**Solutions:**
1. Ensure CATEGORY_URL_PATTERN contains `{slug}`
2. Ensure
